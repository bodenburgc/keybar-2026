{%- doc -%}
  Renders a nested insert item in the cart (compact format).
  Used for displaying tool insert add-ons nested under their parent KeyBar.
  Includes an individual remove button for each insert.

  @param {object} item - The cart line item (insert)
{%- enddoc -%}

<div class="cart-addon flex items-center gap-2d5">
  {%- if item.image -%}
    <figure class="cart-addon__media shrink-0">
      {{- item.image | image_url: width: 80 | image_tag: loading: 'lazy', is: 'lazy-image' -}}
    </figure>
  {%- endif -%}

  <div class="cart-addon__details grow">
    <span class="cart-addon__title text-xs leading-tight">
      {{ item.product.title | escape }}
      {%- unless item.product.has_only_default_variant -%}
        {%- for option in item.options_with_values -%}
          <span class="text-opacity"> &middot; {{ option.value }}</span>
        {%- endfor -%}
      {%- endunless -%}
    </span>
  </div>

  <span class="cart-addon__price text-xs text-opacity shrink-0">
    +{{ item.final_price | money_with_currency }}
  </span>

  <a class="link text-xs shrink-0" href="{{ item.url_to_remove }}" is="cart-remove-button" data-index="{{ item.key }}" data-no-instant>
    {{ 'products.insert.remove' | t | default: 'Remove' }}
  </a>
</div>
